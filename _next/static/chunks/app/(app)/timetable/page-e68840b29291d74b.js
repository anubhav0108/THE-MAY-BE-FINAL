(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2083],{1950:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>f});var l=s(95155),a=s(12115),d=s(52619),r=s.n(d),c=s(21952),n=s(71084),i=s(86948),o=s(3998),h=s(11186),m=s(28127),u=s(60805),x=s(27314);function f(){let{timetableResult:e,students:t,courses:s,userRole:d}=(0,a.useContext)(c.y),[f,b]=(0,a.useState)(null),[j,p]=(0,a.useState)(null),y=null!=j?j:null==e?void 0:e.timetable,v=t.find(e=>e.id===f);return e?(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-3xl font-headline font-bold",children:v?"Timetable for ".concat(v.name):"Master Timetable"}),(0,l.jsx)("p",{className:"text-muted-foreground",children:v?"Showing personalized schedule for ".concat(v.branch,", Year ").concat(v.year,"."):"Displaying the complete institutional timetable. Use the selector to view a student-specific schedule."})]}),(0,l.jsx)("div",{className:"w-full md:w-[300px]",children:(0,l.jsxs)(h.l6,{onValueChange:l=>{if(b(l),"all"===l)return void p(null);if(!e)return;let a=t.find(e=>e.id===l);if(!a)return;let d=new Set;a.electiveChoices.forEach(e=>d.add(e));let r=a.branch.substring(0,2).toUpperCase(),c=a.year;s.forEach(e=>{let t=e.code.toUpperCase();if(t.startsWith(r)){let s=t.match(/[a-zA-Z]+(\d)/);s&&s[1]&&parseInt(s[1],10)===c&&d.add(e.code)}(e.code.startsWith("HS")||e.code.startsWith("PH"))&&c<=2&&d.add(e.code)}),p(e.timetable.filter(e=>d.has(e.courseCode)))},defaultValue:"all",children:[(0,l.jsxs)(h.bq,{className:"w-full",children:[(0,l.jsx)(x.A,{className:"mr-2 h-4 w-4 text-muted-foreground"}),(0,l.jsx)(h.yv,{placeholder:"View by Student"})]}),(0,l.jsxs)(h.gC,{children:[(0,l.jsx)(h.eb,{value:"all",children:"View Master Timetable"}),t.map(e=>(0,l.jsxs)(h.eb,{value:e.id,children:[e.name," (",e.id,")"]},e.id))]})]})})]}),y&&y.length>0?(0,l.jsx)(n.E,{timetable:y,conflicts:"all"===f?e.conflicts:[],report:"all"===f?e.report:""}):(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center rounded-lg border border-dashed p-12 text-center mt-8",children:[(0,l.jsx)(m.A,{className:"h-12 w-12 text-muted-foreground mb-4"}),(0,l.jsx)("h3",{className:"text-xl font-bold tracking-tight",children:"No Classes Found"}),(0,l.jsx)("p",{className:"text-sm text-muted-foreground",children:"Could not find any scheduled classes for the selected student."})]})]}):(0,l.jsx)("div",{className:"flex flex-col items-center justify-center h-full text-center",children:(0,l.jsxs)(i.Zp,{className:"w-full max-w-lg",children:[(0,l.jsxs)(i.aR,{children:[(0,l.jsx)("div",{className:"mx-auto bg-secondary p-3 rounded-full mb-4",children:(0,l.jsx)(m.A,{className:"h-8 w-8 text-secondary-foreground"})}),(0,l.jsx)(i.ZB,{className:"font-headline text-2xl",children:"No Active Timetable"}),(0,l.jsx)(i.BT,{children:"admin"===d?"No active timetable found. Please generate a new timetable from the dashboard.":"An administrator has not generated a timetable yet. Please check back later."})]}),"admin"===d&&(0,l.jsx)(i.Wu,{children:(0,l.jsx)(r(),{href:"/dashboard",children:(0,l.jsxs)(o.$,{children:[(0,l.jsx)(u.A,{className:"mr-2 h-4 w-4"}),"Go to Dashboard"]})})})]})})}},27314:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});let l=(0,s(14294).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},28127:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});let l=(0,s(14294).A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},58901:(e,t,s)=>{Promise.resolve().then(s.bind(s,1950))}},e=>{e.O(0,[3524,6520,4316,3930,293,4909,1732,1667,838,2592,6727,6996,3785,8653,8441,1255,7358],()=>e(e.s=58901)),_N_E=e.O()}]);